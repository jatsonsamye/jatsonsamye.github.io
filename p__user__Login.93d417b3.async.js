(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(H){H.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},32384:function(){},68102:function(H,$,e){"use strict";e.r($),e.d($,{default:function(){return Se}});var je=e(18106),D=e(16004),Fe=e(34792),N=e(48086),K=e(11849),F=e(3182),M=e(2824),Ee=e(17462),re=e(76772),te=e(94043),m=e.n(te),x=e(28991),n=e(67294),ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ae=ne,se=e(27029),Y=function(o,s){return n.createElement(se.Z,(0,x.Z)((0,x.Z)({},o),{},{ref:s,icon:ae}))};Y.displayName="LockOutlined";var oe=n.forwardRef(Y),le=e(89366),O=e(22122),Le=e(84305),ie=e(75901),k=e(81253),ue=e(54787),ce=e(5894),Be=e(32384),de=["logo","message","contentStyle","title","subTitle","actions","children"];function ve(t){var o,s=t.logo,f=t.message,v=t.contentStyle,Z=t.title,y=t.subTitle,P=t.actions,V=t.children,u=(0,k.Z)(t,de),S=(0,ue.YB)(),G=u.submitter===!1?!1:(0,x.Z)((0,x.Z)({searchConfig:{submitText:S.getMessage("loginForm.submitText","\u767B\u5F55")}},u.submitter),{},{submitButtonProps:(0,x.Z)({size:"large",style:{width:"100%"}},(o=u.submitter)===null||o===void 0?void 0:o.submitButtonProps),render:function(L,b){var B,R=b.pop();if(typeof(u==null||(B=u.submitter)===null||B===void 0?void 0:B.render)=="function"){var j,T;return u==null||(j=u.submitter)===null||j===void 0||(T=j.render)===null||T===void 0?void 0:T.call(j,L,b)}return R}}),w=(0,n.useContext)(ie.ZP.ConfigContext),I=w.getPrefixCls("pro-form-login"),c=function(L){return"".concat(I,"-").concat(L)},E=(0,n.useMemo)(function(){return s?typeof s=="string"?n.createElement("img",{src:s}):s:null},[s]);return n.createElement("div",{className:c("container")},n.createElement("div",{className:c("top")},Z||E?n.createElement("div",{className:c("header")},E?n.createElement("span",{className:c("logo")},E):null,Z?n.createElement("span",{className:c("title")},Z):null):null,y?n.createElement("div",{className:c("desc")},y):null),n.createElement("div",{className:c("main"),style:(0,x.Z)({width:328},v)},n.createElement(ce.A,(0,O.Z)({isKeyPressSubmit:!0},u,{submitter:G}),f,V),P?n.createElement("div",{className:c("other")},P):null))}var Te=e(63185),me=e(9676),W=e(22270),fe=e(64893),J=e(16685),ge=["options","fieldProps","proFieldProps","valueEnum"],he=n.forwardRef(function(t,o){var s=t.options,f=t.fieldProps,v=t.proFieldProps,Z=t.valueEnum,y=(0,k.Z)(t,ge);return n.createElement(J.Z,(0,O.Z)({ref:o,valueType:"checkbox",mode:"edit",valueEnum:(0,W.h)(Z,void 0),fieldProps:(0,x.Z)({options:s},f),lightProps:(0,x.Z)({labelFormatter:function(){return n.createElement(J.Z,(0,O.Z)({ref:o,valueType:"checkbox",mode:"read",valueEnum:(0,W.h)(Z,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,x.Z)({options:s},f),proFieldProps:v},y))}},y.lightProps),proFieldProps:v},y))}),pe=n.forwardRef(function(t,o){var s=t.fieldProps,f=t.children;return n.createElement(me.Z,(0,O.Z)({ref:o},s),f)}),xe=(0,fe.G)(pe,{valuePropName:"checked"}),Q=xe;Q.Group=he;var ye=Q,X=e(5966),C=e(25377),Ne=e(92002);function Oe(t,o){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime.mark(function t(o,s){return _regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",request("/api/login/captcha",_objectSpread({method:"GET",params:_objectSpread({},o)},s||{})));case 1:case"end":return v.stop()}},t)})),U.apply(this,arguments)}var Ze=e(34687),A=e.n(Ze),z=e(7939),r=e(85893),Ce=function(o){var s=o.content;return(0,r.jsx)(re.Z,{style:{marginBottom:24},message:s,type:"error",showIcon:!0})},Pe=function(){var o=(0,n.useState)({}),s=(0,M.Z)(o,2),f=s[0],v=s[1],Z=(0,n.useState)("account"),y=(0,M.Z)(Z,2),P=y[0],V=y[1],u=(0,C.tT)("@@initialState"),S=u.initialState,G=u.setInitialState,w=(0,n.useState)({}),I=(0,M.Z)(w,2),c=I[0],E=I[1],q=(0,C.YB)(),L=function(){var g=(0,F.Z)(m().mark(function i(){var l,d;return m().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,S==null||(l=S.fetchUserInfo)===null||l===void 0?void 0:l.call(S);case 2:if(d=h.sent,!d){h.next=6;break}return h.next=6,G(function(ee){return(0,K.Z)((0,K.Z)({},ee),{},{currentUser:d})});case 6:case"end":return h.stop()}},i)}));return function(){return g.apply(this,arguments)}}(),b=function(){var g=(0,F.Z)(m().mark(function i(){var l;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z.O.auth.api.resetPasswordForEmail(c.username);case 2:l=a.sent,l.error&&N.ZP.error("\u91CD\u8A2D\u5BC6\u78BC\u5931\u6557\uFF0C\u8ACB\u91CD\u8A66"),console.log(l);case 5:case"end":return a.stop()}},i)}));return function(){return g.apply(this,arguments)}}(),B=function(){var g=(0,F.Z)(m().mark(function i(){var l;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z.O.auth.signUp({email:c.username,password:c.password});case 2:l=a.sent,l.error&&N.ZP.error("\u8A3B\u518A\u5931\u6557\uFF0C\u8ACB\u91CD\u8A66"),console.log(l);case 5:case"end":return a.stop()}},i)}));return function(){return g.apply(this,arguments)}}(),R=function(){var g=(0,F.Z)(m().mark(function i(l){var d,a,h;return m().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,z.O.auth.signIn({email:l.username,password:l.password});case 2:if(d=p.sent,d.error){p.next=15;break}return N.ZP.success("\u767B\u5165\u6210\u529F"),p.next=7,L();case 7:if(C.m8){p.next=9;break}return p.abrupt("return");case 9:return a=C.m8.location.query,h=a.redirect,C.m8.push(h||"/"),p.abrupt("return");case 15:d.error&&N.ZP.error("\u767B\u5165\u5931\u6557\uFF0C\u8ACB\u91CD\u8A66");case 16:console.log(d),v(d);case 18:case"end":return p.stop()}},i)}));return function(l){return g.apply(this,arguments)}}(),j=f.status,T=f.type;return(0,r.jsx)("div",{className:A().container,children:(0,r.jsx)("div",{className:A().content,children:(0,r.jsxs)(ve,{logo:(0,r.jsx)("a",{href:"/",children:(0,r.jsx)("img",{alt:"logo",src:"/logo.png"})}),title:(0,r.jsx)("span",{style:{color:"white"},children:"\u5609\u6625\u6851\u8036\u5BFA"}),subTitle:(0,r.jsx)("span",{style:{color:"white"}}),initialValues:{autoLogin:!0},actions:[],onValuesChange:function(i){return E(_.merge(c,i))},onFinish:function(){var g=(0,F.Z)(m().mark(function i(l){return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R(l);case 2:case"end":return a.stop()}},i)}));return function(i){return g.apply(this,arguments)}}(),children:[(0,r.jsx)(D.Z,{activeKey:P,onChange:V,children:(0,r.jsx)(D.Z.TabPane,{tab:"\u5E33\u865F\u5BC6\u78BC\u767B\u5165"},"account")}),j==="error"&&T==="account"&&(0,r.jsx)(Ce,{content:"\u5E33\u6236\u6216\u5BC6\u78BC\u932F\u8AA4"}),P==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(le.Z,{className:A().prefixIcon})},placeholder:"your.email@xxx.com",rules:[{required:!0,type:"email",message:"\u7528\u6236\u540D\u5FC5\u9808\u662F\u90F5\u4EF6\u5730\u5740"}]}),(0,r.jsx)(X.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(oe,{className:A().prefixIcon})},placeholder:"",rules:[{required:!0,message:(0,r.jsx)(C._H,{id:"pages.login.password.required",defaultMessage:"\u8ACB\u8F38\u5165\u5BC6\u78BC"})}]})]}),(0,r.jsxs)("div",{style:{marginBottom:24},children:[(0,r.jsx)(ye,{noStyle:!0,name:"autoLogin",children:(0,r.jsx)("span",{style:{color:"white"},children:"\u81EA\u52D5\u767B\u5165"})}),(0,r.jsx)("a",{style:{float:"right",paddingLeft:"10px"},onClick:b,children:"\u5FD8\u8A18\u5BC6\u78BC"}),(0,r.jsx)("a",{style:{float:"right"},onClick:B,children:"\u8A3B\u518A"})]})]})})})},Se=Pe}}]);
